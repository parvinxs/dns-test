<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Live DNS Tester</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;700&display=swap');

body {
  font-family: 'Vazirmatn', sans-serif;
  background: linear-gradient(135deg,#0f172a,#1e293b);
  color: #f1f5f9;
  text-align: center;
  padding: 20px;
  min-height: 100vh;
  transition: background 0.5s ease;
}

h1 {
  color: #38bdf8; 
  font-size: 2em; 
  margin-bottom: 10px; 
  display: flex; 
  justify-content: center; 
  align-items: center; 
  gap: 10px;
}

.best-dns {
  font-size: 1.3em;
  color: #22c55e;
  font-weight: bold;
  margin-bottom: 20px;
  transition: all 0.5s ease;
}

button {
  background: #38bdf8; border: none; color: #fff;
  padding: 12px 25px; border-radius: 12px;
  font-size: 1rem; font-weight: bold;
  cursor: pointer; transition: all 0.3s ease;
  margin-bottom: 20px;
}
button:hover { background: #0ea5e9; transform: scale(1.05);}
button:disabled { opacity:0.6; cursor:default; transform:none;}

.dns-list { display:flex; flex-direction: column; gap:20px; max-width:600px; margin:0 auto;}
.dns-card {
  background: rgba(255,255,255,0.05); padding:15px 20px;
  border-radius:12px; text-align:right; box-shadow:0 4px 15px rgba(0,0,0,0.3);
  position:relative; overflow:hidden; transition: transform 0.3s ease, background 0.3s ease;
  display:flex; flex-direction: column; gap:6px;
}
.dns-card:hover { transform: scale(1.02); background: rgba(255,255,255,0.1);}
.dns-card.fastest { border:2px solid #22c55e; box-shadow:0 0 25px #22c55e88;}

.dns-name { font-weight:bold; font-size:1.1em; display:flex; align-items:center; gap:8px;}
.dns-name span { font-size:0.9em; color:#94a3b8;}

.speed-bar-container {
  background: rgba(255,255,255,0.1); border-radius:10px; height:16px;
  overflow:hidden; position:relative;
}
.speed-bar {
  height:100%; width:0%; border-radius:10px; transition: width 0.3s ease, background 0.3s ease;
  background: linear-gradient(90deg, #22c55e, #3b82f6, #facc15, #f87171);
  background-size: 400% 100%;
  animation: gradientMove 2s linear infinite;
}
.speed-label {
  position:absolute; right:10px; top:-2px; font-size:0.9em; font-weight:bold;
  color:#f1f5f9; text-shadow:0 0 4px rgba(0,0,0,0.7);
}

.loader { margin:20px auto; width:24px; height:24px; border:3px solid #38bdf8; border-top-color: transparent; border-radius:50%; animation:spin 1s linear infinite;}
@keyframes spin { to { transform: rotate(360deg); } }
@keyframes gradientMove { 0%{background-position:0%}100%{background-position:400%} }

.fsociety-logo {
  width: 36px;
  height: 36px;
}

.creator {
  margin-top:40px;
  font-size:0.95em;
  color:#94a3b8;
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 5px;
  flex-wrap: wrap;
}

.creator a {
  color:#38bdf8;
  text-decoration:none;
  font-weight:bold;
  text-shadow: 0 0 5px #38bdf8, 0 0 10px #38bdf8;
  transition: all 0.3s ease;
}
.creator a:hover {
  color: #22c55e;
  text-shadow: 0 0 8px #22c55e, 0 0 15px #22c55e;
  text-decoration: underline;
}
</style>
</head>
<body>
<h1>
  Live DNS Tester
  <svg class="fsociety-logo" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
    <circle cx="256" cy="256" r="256" fill="#fff"/>
    <path d="M256 0C114.62 0 0 114.62 0 256s114.62 256 256 256 256-114.62 256-256S397.38 0 256 0zm0 480C132.288 480 32 379.712 32 256S132.288 32 256 32s224 100.288 224 224-100.288 224-224 224z" fill="#000"/>
    <circle cx="256" cy="256" r="80" fill="#000"/>
  </svg>
</h1>
<div id="bestDNS" class="best-dns"></div>
<button id="startBtn">üöÄ Start Test</button>
<div id="results" class="dns-list"></div>

<!-- ÿ®ÿÆÿ¥ ÿ≥ÿßÿ≤ŸÜÿØŸá ÿ®ÿß ÿßŸÅ⁄©ÿ™ Neon -->
<div class="creator">
  ÿ≥ÿßÿÆÿ™Ÿá ÿ¥ÿØŸá ÿ™Ÿàÿ≥ÿ∑ <strong>XSParvin</strong> | 
  <a href="https://t.me/xsfsociety" target="_blank" rel="noopener noreferrer">⁄©ÿßŸÜÿßŸÑ ÿ™ŸÑ⁄Øÿ±ÿßŸÖ</a>
</div>

<script>
const dnsServers = [
  {name:"Google", url:"https://www.google.com/favicon.ico"},
  {name:"Cloudflare", url:"https://www.cloudflare.com/favicon.ico"},
  {name:"Quad9", url:"https://www.quad9.net/favicon.ico"},
  {name:"AdGuard", url:"https://adguard.com/favicon.ico"},
  {name:"OpenDNS", url:"https://www.opendns.com/favicon.ico"},
  {name:"CleanBrowsing", url:"https://cleanbrowsing.org/favicon.ico"},
  {name:"NextDNS", url:"https://nextdns.io/favicon.ico"},
  {name:"Comodo Secure DNS", url:"https://www.comodo.com/favicon.ico"},
  {name:"Alternate DNS", url:"https://alternate-dns.com/favicon.ico"},
  {name:"Yandex", url:"https://yandex.com/favicon.ico"},
  {name:"DNS.Watch", url:"https://dns.watch/favicon.ico"}
];

function getColor(speed){
  if(speed<100) return "#22c55e";
  if(speed<200) return "#3b82f6";
  if(speed<400) return "#facc15";
  return "#f87171";
}

function fetchWithTimeout(url, timeout=1500){
  return new Promise(resolve => {
    const timer = setTimeout(()=>resolve(Infinity), timeout);
    fetch(url, {mode:'no-cors'})
      .then(()=>{ clearTimeout(timer); resolve(performance.now()); })
      .catch(()=>{ clearTimeout(timer); resolve(Infinity); });
  });
}

async function testDNS(url){
  const start = performance.now();
  const time = await fetchWithTimeout(url,1500);
  return time===Infinity ? 1500 : performance.now()-start;
}

document.getElementById("startBtn").onclick = async function(){
  const btn = this;
  const resultsDiv = document.getElementById("results");
  const bestDiv = document.getElementById("bestDNS");
  btn.disabled = true;
  bestDiv.textContent = '';
  resultsDiv.innerHTML = '<div class="loader"></div>';

  resultsDiv.innerHTML = '';
  const cards = dnsServers.map(dns => {
    const card = document.createElement('div');
    card.className = 'dns-card';
    card.innerHTML = `
      <div class="dns-name">${dns.name} <span>Testing...</span></div>
      <div class="speed-bar-container">
        <div class="speed-bar"></div>
        <div class="speed-label">...</div>
      </div>`;
    resultsDiv.appendChild(card);
    return {dns, card, time:Infinity};
  });

  let fastestTime = Infinity;
  let fastestIndex = 0;

  await Promise.all(dnsServers.map(async (dns, index)=>{
    const time = await testDNS(dns.url);
    cards[index].time = time;
    if(time<fastestTime){
      fastestTime = time;
      fastestIndex = index;
    }

    const bar = cards[index].card.querySelector('.speed-bar');
    const label = cards[index].card.querySelector('.speed-label');
    const percent = Math.min(100,(time/fastestTime)*100);
    bar.style.width = `${100-percent}%`;
    bar.style.background = getColor(time);
    label.textContent = `${Math.round(time)} ms`;

    cards.forEach(c=>c.card.classList.remove('fastest'));
    cards[fastestIndex].card.classList.add('fastest');

    const status = cards[index].card.querySelector('.dns-name span');
    status.textContent = '‚úîÔ∏è Done';
  }));

  bestDiv.textContent = `üèÜ Best DNS: ${cards[fastestIndex].dns.name} (${Math.round(fastestTime)} ms)`;
  btn.disabled = false;
};
</script>
</body>
</html>